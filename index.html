<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>AJAX POST REQUEST</title>
    </head>
    <body>
        <form id="main-form">
            <label>Username:</label><br>
            <input type="text" name="username"><br>
            <label>Comment:</label><br>
            <textarea name="comment"></textarea><br>
            <p><button onclick="postComment()">Post Comment</button></p>
        </form>
        <div id="result">
            <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit.
                Nesciunt est vitae veritatis doloremque, deleniti adipisci
                eveniet. Aliquam beatae atque vero sint ipsam. Nemo dolorem
                quidem eaque totam omnis. Molestiae ratione at odio ut nisi,
                optio vitae amet officiis dolore consequatur quas sapiente
                doloribus veniam dolorem eos adipisci, velit reiciendis quis.</p>
        </div>
        <script>
            function postComment(){
            // Step 1: set up our AJAX object / engine
            const xhr = new XMLHttpRequest()
            // Step 2: configure our AJAX object
            const method = "POST"
            const url = "./message.php"
            xhr.open(method, url)
            // Step 3: listen for events
            xhr.onreadystatechange = () => {
                if(this.readyState === 4 && this.status === 200){
                    const result = document.getElementById("result")
                    result.innerText = this.responseText
                }
            }
            // Step 4: send our AJAX request
            const myForm = document.getElementById("main-form")
            const userData = new FormData(myForm)
            console.log(userData)
            xhr.send(userData)
        }
        </script>
    </body>
</html>